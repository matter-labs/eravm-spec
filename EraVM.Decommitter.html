<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>EraVM.Decommitter</title>

  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library EraVM.Decommitter</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <a class="idref" href="EraVM.Common.html#"><span class="id" title="library">Common</span></a> <a class="idref" href="EraVM.ABI.html#"><span class="id" title="library">ABI</span></a> <span class="id" title="library">lib.Decidability</span> <a class="idref" href="EraVM.History.html#"><span class="id" title="library">History</span></a> <a class="idref" href="EraVM.memory.Depot.html#"><span class="id" title="library">memory.Depot</span></a> <a class="idref" href="EraVM.MemoryOps.html#"><span class="id" title="library">MemoryOps</span></a> <a class="idref" href="EraVM.VersionedHash.html#"><span class="id" title="library">VersionedHash</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="EraVM.Coder.html#"><span class="id" title="module">Coder</span></a> <a class="idref" href="EraVM.Core.html#"><span class="id" title="module">Core</span></a> <a class="idref" href="EraVM.History.html#"><span class="id" title="module">History</span></a> <a class="idref" href="EraVM.VersionedHash.html#"><span class="id" title="module">VersionedHash</span></a> <a class="idref" href="EraVM.Common.html#"><span class="id" title="module">Common</span></a> <span class="id" title="module">Decidability</span> <a class="idref" href="EraVM.Ergs.html#"><span class="id" title="module">Ergs</span></a> <a class="idref" href="EraVM.MemoryBase.html#"><span class="id" title="module">MemoryBase</span></a> <a class="idref" href="EraVM.memory.Depot.html#"><span class="id" title="module">memory.Depot</span></a> <a class="idref" href="EraVM.TransientMemory.html#"><span class="id" title="module">TransientMemory</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="module">ZArith</span></a> <a class="idref" href="EraVM.ABI.html#"><span class="id" title="module">ABI</span></a> <span class="id" title="module">bits</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Decommitter" class="idref" href="#Decommitter"><span class="id" title="section">Decommitter</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ZMod_scope</span>.<br/>
</div>

<div class="doc"><h1 id="decommitter">Decommitter</h1>
<p>Decommitter is a module external to EraVM, a key-value storage
where:</p>
<ul>
<li>key is <span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#versioned_hash"><span
class="id" title="record">versioned_hash</span></a></span></li>
<li>value is the contract code</li>
</ul>
<p><strong>Decommitting</strong> refers to querying contract code from
the decommitter and filling new <span
class="inlinecode"><a class="idref" href="EraVM.State.html#code_page"><span
class="id" title="definition">code_page</span></a></span> and <span
class="inlinecode"><a class="idref" href="EraVM.memory.PageTypes.html#const_page"><span
class="id" title="definition">const_page</span></a></span> with it. The
rest of the code page is filled with invalid instructions; the rest of
const page is filled with zeros.</p>
<p>The mapping <span
class="inlinecode"><a class="idref" href="EraVM.Decommitter.html#code_hash_location"><span
class="id" title="definition">code_hash_location</span></a></span>
between contract addresses and the hashes of their codes is implemented
by the storage of the contract <span
class="inlinecode"><a class="idref" href="EraVM.Decommitter.html#DEPLOYER_SYSTEM_CONTRACT_ADDRESS"><span
class="id"
title="definition">DEPLOYER_SYSTEM_CONTRACT_ADDRESS</span></a></span>.</p>
<p>Note: storage with the same contract address may differ between
shards.</p>
</div>
<div class="code">
<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="DEPLOYER_SYSTEM_CONTRACT_ADDRESS" class="idref" href="#DEPLOYER_SYSTEM_CONTRACT_ADDRESS"><span class="id" title="definition">DEPLOYER_SYSTEM_CONTRACT_ADDRESS</span></a> : <a class="idref" href="EraVM.memory.Depot.html#contract_address"><span class="id" title="definition">contract_address</span></a> := <span class="id" title="definition">fromZ</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">(</span></a>2<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.BinInt.html#14ef112b66e341f773bd1e9d05816f43"><span class="id" title="notation">^</span></a>15<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 2).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="code_hash_location" class="idref" href="#code_hash_location"><span class="id" title="definition">code_hash_location</span></a> (<a id="for_contract:1" class="idref" href="#for_contract:1"><span class="id" title="binder">for_contract</span></a>: <a class="idref" href="EraVM.memory.Depot.html#contract_address"><span class="id" title="definition">contract_address</span></a>) (<a id="sid:2" class="idref" href="#sid:2"><span class="id" title="binder">sid</span></a>:<a class="idref" href="EraVM.memory.Depot.html#shard_id"><span class="id" title="definition">Depot.shard_id</span></a>): <a class="idref" href="EraVM.memory.Depot.html#fqa_key"><span class="id" title="record">fqa_key</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.memory.Depot.html#mk_fqa_key"><span class="id" title="constructor">mk_fqa_key</span></a> (<a class="idref" href="EraVM.memory.Depot.html#mk_fqa_storage"><span class="id" title="constructor">mk_fqa_storage</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:2"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#DEPLOYER_SYSTEM_CONTRACT_ADDRESS"><span class="id" title="definition">DEPLOYER_SYSTEM_CONTRACT_ADDRESS</span></a>) (<a class="idref" href="EraVM.Arith.html#widen"><span class="id" title="definition">widen</span></a> <a class="idref" href="EraVM.Core.html#word_bits"><span class="id" title="definition">word_bits</span></a> <a class="idref" href="EraVM.Decommitter.html#for_contract:1"><span class="id" title="variable">for_contract</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ins_type:3" class="idref" href="#ins_type:3"><span class="id" title="binder">ins_type</span></a>: <span class="id" title="keyword">Type</span>} (<a id="invalid_ins:4" class="idref" href="#invalid_ins:4"><span class="id" title="binder">invalid_ins</span></a>: <a class="idref" href="EraVM.Decommitter.html#ins_type:3"><span class="id" title="variable">ins_type</span></a>) (<a id="code_page:5" class="idref" href="#code_page:5"><span class="id" title="binder">code_page</span></a> := <a class="idref" href="EraVM.memory.PageTypes.html#code_page"><span class="id" title="record">code_page</span></a> <a class="idref" href="EraVM.Decommitter.html#invalid_ins:4"><span class="id" title="variable">invalid_ins</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="empty_code:6" class="idref" href="#empty_code:6"><span class="id" title="binder">empty_code</span></a> : <a class="idref" href="EraVM.Decommitter.html#code_page:5"><span class="id" title="variable">code_page</span></a> := @<a class="idref" href="EraVM.memory.PageTypes.html#mk_code_page"><span class="id" title="constructor">mk_code_page</span></a> <span class="id" title="var">_</span> <a class="idref" href="EraVM.Decommitter.html#invalid_ins:4"><span class="id" title="variable">invalid_ins</span></a> (<a class="idref" href="EraVM.MemoryBase.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="empty_const:7" class="idref" href="#empty_const:7"><span class="id" title="binder">empty_const</span></a>: <a class="idref" href="EraVM.memory.PageTypes.html#const_page"><span class="id" title="definition">const_page</span></a> := (<a class="idref" href="EraVM.MemoryBase.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span> )).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="code_storage_params" class="idref" href="#code_storage_params"><span class="id" title="definition">code_storage_params</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.MemoryBase.html#addressable_block"><span class="id" title="projection">addressable_block</span></a> := <a class="idref" href="EraVM.Decommitter.html#Decommitter.code_page"><span class="id" title="variable">code_page</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.memory.PageTypes.html#const_page"><span class="id" title="definition">const_page</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.MemoryBase.html#address_bits"><span class="id" title="projection">address_bits</span></a> := 256;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.MemoryBase.html#default_value"><span class="id" title="projection">default_value</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.Decommitter.html#Decommitter.empty_code"><span class="id" title="variable">empty_code</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#Decommitter.empty_const"><span class="id" title="variable">empty_const</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.MemoryBase.html#writable"><span class="id" title="projection">writable</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="code_storage" class="idref" href="#code_storage"><span class="id" title="definition">code_storage</span></a>: <span class="id" title="keyword">Type</span> := <a class="idref" href="EraVM.MemoryBase.html#mem_parameterized"><span class="id" title="record">mem_parameterized</span></a> <a class="idref" href="EraVM.Decommitter.html#code_storage_params"><span class="id" title="definition">code_storage_params</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="EraVM.VersionedHash.html#"><span class="id" title="module">VersionedHash</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="decommitter" class="idref" href="#decommitter"><span class="id" title="record">decommitter</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mk_code_mgr</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="cm_storage" class="idref" href="#cm_storage"><span class="id" title="projection">cm_storage</span></a>: <a class="idref" href="EraVM.Decommitter.html#code_storage"><span class="id" title="definition">code_storage</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="cm_accessed" class="idref" href="#cm_accessed"><span class="id" title="projection">cm_accessed</span></a>: <a class="idref" href="EraVM.History.html#history"><span class="id" title="definition">history</span></a> <a class="idref" href="EraVM.VersionedHash.html#vh_eqType"><span class="id" title="definition">vh_eqType</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc"><p>The versioned hash is called <strong>cold</strong> if it was not
accessed during construction of the current block. Otherwise, it is
<strong>warm</strong>. See <span
class="inlinecode"><a class="idref" href="EraVM.Decommitter.html#is_first_access"><span
class="id" title="definition">is_first_access</span></a></span>.</p>
</div>
<div class="code">
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_first_access" class="idref" href="#is_first_access"><span class="id" title="definition">is_first_access</span></a> <a id="cm:11" class="idref" href="#cm:11"><span class="id" title="binder">cm</span></a> <a id="vh:12" class="idref" href="#vh:12"><span class="id" title="binder">vh</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="EraVM.History.html#contains"><span class="id" title="definition">contains</span></a> <span class="id" title="var">_</span> (<a class="idref" href="EraVM.Decommitter.html#cm_accessed"><span class="id" title="projection">cm_accessed</span></a> <a class="idref" href="EraVM.Decommitter.html#cm:11"><span class="id" title="variable">cm</span></a>) <a class="idref" href="EraVM.Decommitter.html#vh:12"><span class="id" title="variable">vh</span></a>).<br/>

<br/>
</div>

<div class="doc"><p>Decommitting code by a cold versioned hash costs (<span
class="inlinecode"><a class="idref" href="EraVM.Ergs.html#ERGS_PER_CODE_WORD_DECOMMITTMENT"><span
class="id"
title="definition">ERGS_PER_CODE_WORD_DECOMMITTMENT</span></a></span> *
(block size in words)) ergs. Decommitting warm code is free.</p>
</div>
<div class="code">
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="decommitment_cost" class="idref" href="#decommitment_cost"><span class="id" title="inductive">decommitment_cost</span></a> (<a id="cm:13" class="idref" href="#cm:13"><span class="id" title="binder">cm</span></a>:<a class="idref" href="EraVM.Decommitter.html#decommitter"><span class="id" title="record">decommitter</span></a>) <a id="vhash:14" class="idref" href="#vhash:14"><span class="id" title="binder">vhash</span></a> (<a id="code_length_in_words:15" class="idref" href="#code_length_in_words:15"><span class="id" title="binder">code_length_in_words</span></a>: <a class="idref" href="EraVM.memory.PageTypes.html#code_length"><span class="id" title="definition">code_length</span></a>): <a class="idref" href="EraVM.Ergs.html#ergs"><span class="id" title="definition">ergs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;|<a id="dc_fresh" class="idref" href="#dc_fresh"><span class="id" title="constructor">dc_fresh</span></a>: <span class="id" title="keyword">∀</span> <a id="bigcost:18" class="idref" href="#bigcost:18"><span class="id" title="binder">bigcost</span></a> <a id="cost:19" class="idref" href="#cost:19"><span class="id" title="binder">cost</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#is_first_access"><span class="id" title="definition">is_first_access</span></a> <a class="idref" href="EraVM.Decommitter.html#cm:13"><span class="id" title="variable">cm</span></a> <a class="idref" href="EraVM.Decommitter.html#vhash:14"><span class="id" title="variable">vhash</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#bigcost:18"><span class="id" title="variable">bigcost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="EraVM.Ergs.html#ergs_of"><span class="id" title="definition">ergs_of</span></a> <a class="idref" href="EraVM.Ergs.html#ERGS_PER_CODE_WORD_DECOMMITTMENT"><span class="id" title="definition">Ergs.ERGS_PER_CODE_WORD_DECOMMITTMENT</span></a> <a class="idref" href="EraVM.Arith.html#a2b4273a2140deed386b9215048ca773"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.Arith.html#a2b4273a2140deed386b9215048ca773"><span class="id" title="notation">(</span></a><span class="id" title="definition">zeroExtend</span> (<a class="idref" href="EraVM.Ergs.html#ergs_bits"><span class="id" title="definition">ergs_bits</span></a> <span class="id" title="notation">-</span> <a class="idref" href="EraVM.memory.PageTypes.html#code_address_bits"><span class="id" title="definition">code_address_bits</span></a>) <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:15"><span class="id" title="variable">code_length_in_words</span></a><a class="idref" href="EraVM.Arith.html#a2b4273a2140deed386b9215048ca773"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">toZ</span> <a class="idref" href="EraVM.Decommitter.html#bigcost:18"><span class="id" title="variable">bigcost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">≤</span></a> <a class="idref" href="EraVM.Arith.html#unsigned_max"><span class="id" title="definition">unsigned_max</span></a> <a class="idref" href="EraVM.Ergs.html#ergs_bits"><span class="id" title="definition">ergs_bits</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#cost:19"><span class="id" title="variable">cost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">low</span> <a class="idref" href="EraVM.Ergs.html#ergs_bits"><span class="id" title="definition">ergs_bits</span></a> <a class="idref" href="EraVM.Decommitter.html#bigcost:18"><span class="id" title="variable">bigcost</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#decommitment_cost:16"><span class="id" title="inductive">decommitment_cost</span></a> <a class="idref" href="EraVM.Decommitter.html#cm:13"><span class="id" title="variable">cm</span></a> <a class="idref" href="EraVM.Decommitter.html#vhash:14"><span class="id" title="variable">vhash</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:15"><span class="id" title="variable">code_length_in_words</span></a> <a class="idref" href="EraVM.Decommitter.html#cost:19"><span class="id" title="variable">cost</span></a><br/>
&nbsp;&nbsp;|<a id="dc_not_fresh" class="idref" href="#dc_not_fresh"><span class="id" title="constructor">dc_not_fresh</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#is_first_access"><span class="id" title="definition">is_first_access</span></a> <a class="idref" href="EraVM.Decommitter.html#cm:13"><span class="id" title="variable">cm</span></a> <a class="idref" href="EraVM.Decommitter.html#vhash:14"><span class="id" title="variable">vhash</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#decommitment_cost:16"><span class="id" title="inductive">decommitment_cost</span></a> <a class="idref" href="EraVM.Decommitter.html#cm:13"><span class="id" title="variable">cm</span></a> <a class="idref" href="EraVM.Decommitter.html#vhash:14"><span class="id" title="variable">vhash</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:15"><span class="id" title="variable">code_length_in_words</span></a> <a class="idref" href="EraVM.Types.html#zero32"><span class="id" title="definition">zero32</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="code_fetch_hash" class="idref" href="#code_fetch_hash"><span class="id" title="inductive">code_fetch_hash</span></a> (<a id="d:20" class="idref" href="#d:20"><span class="id" title="binder">d</span></a>:<a class="idref" href="EraVM.memory.Depot.html#depot"><span class="id" title="definition">depot</span></a>) (<a id="cs:21" class="idref" href="#cs:21"><span class="id" title="binder">cs</span></a>: <a class="idref" href="EraVM.Decommitter.html#code_storage"><span class="id" title="definition">code_storage</span></a>) (<a id="sid:22" class="idref" href="#sid:22"><span class="id" title="binder">sid</span></a>: <a class="idref" href="EraVM.memory.Depot.html#shard_id"><span class="id" title="definition">Depot.shard_id</span></a>) (<a id="contract_addr:23" class="idref" href="#contract_addr:23"><span class="id" title="binder">contract_addr</span></a>: <a class="idref" href="EraVM.memory.Depot.html#contract_address"><span class="id" title="definition">contract_address</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="EraVM.VersionedHash.html#versioned_hash"><span class="id" title="record">versioned_hash</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.memory.PageTypes.html#code_length"><span class="id" title="definition">code_length</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;|<a id="cfh_found" class="idref" href="#cfh_found"><span class="id" title="constructor">cfh_found</span></a>: <span class="id" title="keyword">∀</span> <a id="hash_enc:26" class="idref" href="#hash_enc:26"><span class="id" title="binder">hash_enc</span></a> <a id="code_length_in_words:27" class="idref" href="#code_length_in_words:27"><span class="id" title="binder">code_length_in_words</span></a> <a id="extra_marker:28" class="idref" href="#extra_marker:28"><span class="id" title="binder">extra_marker</span></a> <a id="partial_hash:29" class="idref" href="#partial_hash:29"><span class="id" title="binder">partial_hash</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.memory.Depot.html#storage_read"><span class="id" title="inductive">storage_read</span></a> <a class="idref" href="EraVM.Decommitter.html#d:20"><span class="id" title="variable">d</span></a> (<a class="idref" href="EraVM.Decommitter.html#code_hash_location"><span class="id" title="definition">code_hash_location</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:23"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:22"><span class="id" title="variable">sid</span></a>) <a class="idref" href="EraVM.Decommitter.html#hash_enc:26"><span class="id" title="variable">hash_enc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#hash_enc:26"><span class="id" title="variable">hash_enc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'<>'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="EraVM.Types.html#zero256"><span class="id" title="definition">zero256</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.VersionedHash.html#marker_valid"><span class="id" title="definition">marker_valid</span></a> <a class="idref" href="EraVM.Decommitter.html#extra_marker:28"><span class="id" title="variable">extra_marker</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.VersionedHash.html#hash_coder"><span class="id" title="axiom">hash_coder</span></a>.(<a class="idref" href="EraVM.Coder.html#decode"><span class="id" title="projection">Coder.decode</span></a>) <a class="idref" href="EraVM.Decommitter.html#hash_enc:26"><span class="id" title="variable">hash_enc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="EraVM.VersionedHash.html#mk_vhash"><span class="id" title="constructor">mk_vhash</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:27"><span class="id" title="variable">code_length_in_words</span></a> <a class="idref" href="EraVM.Decommitter.html#extra_marker:28"><span class="id" title="variable">extra_marker</span></a> <a class="idref" href="EraVM.Decommitter.html#partial_hash:29"><span class="id" title="variable">partial_hash</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch_hash:24"><span class="id" title="inductive">code_fetch_hash</span></a> <a class="idref" href="EraVM.Decommitter.html#d:20"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:21"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:22"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:23"><span class="id" title="variable">contract_addr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.VersionedHash.html#mk_vhash"><span class="id" title="constructor">mk_vhash</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:27"><span class="id" title="variable">code_length_in_words</span></a> <a class="idref" href="EraVM.Decommitter.html#extra_marker:28"><span class="id" title="variable">extra_marker</span></a> <a class="idref" href="EraVM.Decommitter.html#partial_hash:29"><span class="id" title="variable">partial_hash</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:27"><span class="id" title="variable">code_length_in_words</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
<br/>
&nbsp;&nbsp;| <a id="cfh_not_found" class="idref" href="#cfh_not_found"><span class="id" title="constructor">cfh_not_found</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.memory.Depot.html#storage_read"><span class="id" title="inductive">storage_read</span></a> <a class="idref" href="EraVM.Decommitter.html#d:20"><span class="id" title="variable">d</span></a> (<a class="idref" href="EraVM.Decommitter.html#code_hash_location"><span class="id" title="definition">code_hash_location</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:23"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:22"><span class="id" title="variable">sid</span></a>) <a class="idref" href="EraVM.Types.html#zero256"><span class="id" title="definition">zero256</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch_hash:24"><span class="id" title="inductive">code_fetch_hash</span></a> <a class="idref" href="EraVM.Decommitter.html#d:20"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:21"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:22"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:23"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc"><p>When decommitter does not have code for the requested hash, VM may
allow masking, and request the code with default versioned hash <span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#DEFAULT_AA_VHASH"><span
class="id" title="axiom">DEFAULT_AA_VHASH</span></a></span> instead. It
is expected that:</p>
<ul>
<li><span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#DEFAULT_AA_VHASH"><span
class="id" title="axiom">DEFAULT_AA_VHASH</span></a></span> is
well-formed (see <span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#marker_valid"><span
class="id" title="definition">marker_valid</span></a></span>), and</li>
<li>decommitter has code matching <span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#DEFAULT_AA_VHASH"><span
class="id" title="axiom">DEFAULT_AA_VHASH</span></a></span>.</li>
</ul>
<p>VM does not mask the code for system contracts; see <span
class="inlinecode"><span class="id"
title="var">sem.FarCall.step</span></span>.</p>
<p><span
class="inlinecode"><a class="idref" href="EraVM.Decommitter.html#DEFAULT_AA_CODE"><span
class="id" title="axiom">DEFAULT_AA_CODE</span></a></span> is the
decommitter’s answer to the query <span
class="inlinecode"><a class="idref" href="EraVM.VersionedHash.html#DEFAULT_AA_VHASH"><span
class="id" title="axiom">DEFAULT_AA_VHASH</span></a></span>.</p>
</div>
<div class="code">
<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="DEFAULT_AA_CODE" class="idref" href="#DEFAULT_AA_CODE"><span class="id" title="axiom">DEFAULT_AA_CODE</span></a>: (<a class="idref" href="EraVM.Decommitter.html#Decommitter.code_page"><span class="id" title="variable">code_page</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.memory.PageTypes.html#const_page"><span class="id" title="definition">const_page</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="code_fetch" class="idref" href="#code_fetch"><span class="id" title="inductive">code_fetch</span></a>  (<a id="d:31" class="idref" href="#d:31"><span class="id" title="binder">d</span></a>:<a class="idref" href="EraVM.memory.Depot.html#depot"><span class="id" title="definition">depot</span></a>) (<a id="cs:32" class="idref" href="#cs:32"><span class="id" title="binder">cs</span></a>: <a class="idref" href="EraVM.Decommitter.html#code_storage"><span class="id" title="definition">code_storage</span></a>) (<a id="sid:33" class="idref" href="#sid:33"><span class="id" title="binder">sid</span></a>: <a class="idref" href="EraVM.memory.Depot.html#shard_id"><span class="id" title="definition">Depot.shard_id</span></a>) (<a id="contract_addr:34" class="idref" href="#contract_addr:34"><span class="id" title="binder">contract_addr</span></a>: <a class="idref" href="EraVM.memory.Depot.html#contract_address"><span class="id" title="definition">contract_address</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.VersionedHash.html#versioned_hash"><span class="id" title="record">versioned_hash</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.Decommitter.html#Decommitter.code_page"><span class="id" title="variable">code_page</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.memory.PageTypes.html#const_page"><span class="id" title="definition">const_page</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="EraVM.memory.PageTypes.html#code_length"><span class="id" title="definition">code_length</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="cfnm_no_masking" class="idref" href="#cfnm_no_masking"><span class="id" title="constructor">cfnm_no_masking</span></a>: <span class="id" title="keyword">∀</span> <a id="vhash:37" class="idref" href="#vhash:37"><span class="id" title="binder">vhash</span></a> (<a id="code_storage:38" class="idref" href="#code_storage:38"><span class="id" title="binder">code_storage</span></a>:<a class="idref" href="EraVM.Decommitter.html#code_storage"><span class="id" title="definition">code_storage</span></a>) <a id="code_length_in_words:39" class="idref" href="#code_length_in_words:39"><span class="id" title="binder">code_length_in_words</span></a> <a id="pages0:40" class="idref" href="#pages0:40"><span class="id" title="binder">pages0</span></a> <a id="masking:41" class="idref" href="#masking:41"><span class="id" title="binder">masking</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch_hash"><span class="id" title="inductive">code_fetch_hash</span></a> <a class="idref" href="EraVM.Decommitter.html#d:31"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:32"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:33"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:34"><span class="id" title="variable">contract_addr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.Decommitter.html#vhash:37"><span class="id" title="variable">vhash</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:39"><span class="id" title="variable">code_length_in_words</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.MemoryBase.html#load_result"><span class="id" title="inductive">load_result</span></a> <a class="idref" href="EraVM.Decommitter.html#code_storage_params"><span class="id" title="definition">code_storage_params</span></a> (<a class="idref" href="EraVM.Arith.html#widen"><span class="id" title="definition">widen</span></a> 256 (<a class="idref" href="EraVM.VersionedHash.html#partial_hash"><span class="id" title="projection">partial_hash</span></a> <a class="idref" href="EraVM.Decommitter.html#vhash:37"><span class="id" title="variable">vhash</span></a>)) <a class="idref" href="EraVM.Decommitter.html#code_storage:38"><span class="id" title="variable">code_storage</span></a> <a class="idref" href="EraVM.Decommitter.html#pages0:40"><span class="id" title="variable">pages0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch:35"><span class="id" title="inductive">code_fetch</span></a> <a class="idref" href="EraVM.Decommitter.html#d:31"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:32"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:33"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:34"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="EraVM.Decommitter.html#masking:41"><span class="id" title="variable">masking</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.Decommitter.html#vhash:37"><span class="id" title="variable">vhash</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#pages0:40"><span class="id" title="variable">pages0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#code_length_in_words:39"><span class="id" title="variable">code_length_in_words</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
<br/>
<br/>
&nbsp;&nbsp;| <a id="cfnm_masking" class="idref" href="#cfnm_masking"><span class="id" title="constructor">cfnm_masking</span></a>: <span class="id" title="keyword">∀</span> (<a id="code_storage:42" class="idref" href="#code_storage:42"><span class="id" title="binder">code_storage</span></a>:<a class="idref" href="EraVM.Decommitter.html#code_storage"><span class="id" title="definition">code_storage</span></a>) <a id="code_length_in_words:43" class="idref" href="#code_length_in_words:43"><span class="id" title="binder">code_length_in_words</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch_hash"><span class="id" title="inductive">code_fetch_hash</span></a> <a class="idref" href="EraVM.Decommitter.html#d:31"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:32"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:33"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:34"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'->'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="EraVM.Decommitter.html#code_fetch:35"><span class="id" title="inductive">code_fetch</span></a> <a class="idref" href="EraVM.Decommitter.html#d:31"><span class="id" title="variable">d</span></a> <a class="idref" href="EraVM.Decommitter.html#cs:32"><span class="id" title="variable">cs</span></a> <a class="idref" href="EraVM.Decommitter.html#sid:33"><span class="id" title="variable">sid</span></a> <a class="idref" href="EraVM.Decommitter.html#contract_addr:34"><span class="id" title="variable">contract_addr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="EraVM.VersionedHash.html#DEFAULT_AA_VHASH"><span class="id" title="axiom">DEFAULT_AA_VHASH</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="EraVM.Decommitter.html#DEFAULT_AA_CODE"><span class="id" title="axiom">DEFAULT_AA_CODE</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="EraVM.Decommitter.html#code_length_in_words:43"><span class="id" title="variable">code_length_in_words</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="EraVM.Decommitter.html#Decommitter"><span class="id" title="section">Decommitter</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>